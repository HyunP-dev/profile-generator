<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no" />
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>트친소 생성기</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha512-Evv84Mr4kqVGRNSgIGL/F/aIDqQb7xQ2vcrdIwxfjThSH8CSR7PBEakCr51Ck+w+/U6swU2Im1vVX0SVk9ABhg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="style.css" rel="stylesheet" />
    
    <script src="card.js"></script>
    <script>
        window.onload = () => {

            const canvas = document.querySelector("canvas")
            const card = new Card(canvas)

            card.setProfilePicture("https://avatars.githubusercontent.com/u/85296811?v=4")

            let items = [
                new HeaderItem("닉네임", "박현"),
                new HeaderItem("나이", "성인"),
                new HeaderItem("거주지", "서울시 동대문구"),
                new BodyItem("주 필드", "소프트웨어 개발, 디지털 포렌식"),
                new BodyItem("취미", "애니 덕질, 코스프레 촬영, 리듬게임,"),
                new BodyItem("", "작곡, 피아노 연주, 바이올린 연주"),
                new Bar(),
                new BodyItem("좋아하는 게임", "프로젝트 세카이"),
                new BodyItem("좋아하는 애니", "Steins;Gate"),
                new BodyItem("좋아하는 장르", "SF, 공포"),
                new BodyItem("좋아하는 캐릭터", "      미즈키"),
                new Bar(),
                new BodyItem("트위터 활동 성향", "일상 트윗, 일러 / 사진 맘찍"),
                new BodyItem("지뢰", "싸움 only")
            ]
            items.forEach(item => card.addItem(item))

            let ctx = card.ctx

            const characterImage = new Image()
            characterImage.crossOrigin = "anonymous"
            characterImage.addEventListener("load", () => {
                ctx.drawImage(characterImage, 460, 30 + 40 * 7 - 2, 28, 28)
            })
            characterImage.src = "./150px-Mizuki-circle.webp"

            var link = document.getElementById('link')
            link.setAttribute('download', '트친소.png')

            document.querySelector("#exportBtn").onclick = () => {
                link.setAttribute('href', canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"))
                link.click()
            }
        }
    </script>
</head>

<body>
    <header>
        <h1>트친소 생성기</h1>
        <button id="exportBtn"><i class="fa-solid fa-download"></i></span>
    </header>
    <canvas></canvas>
    <a id="link"></a>
    <br>
    <div id="edits">
        <label>닉네임</label><br>
        <input />
        <label>나이</label><br>
        <input />
        <label>거주지</label><br>
        <input />
    </div>
</body>

</html>